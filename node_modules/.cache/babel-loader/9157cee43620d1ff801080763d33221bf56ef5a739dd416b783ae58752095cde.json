{"ast":null,"code":"import _slicedToArray from\"/Users/anti1hero/Desktop/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import api from\"../utils/api\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ButtonLike(_ref){var likes=_ref.likes,myId=_ref.myId,cardId=_ref.cardId;var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isLike=_React$useState2[0],setLike=_React$useState2[1];var _React$useState3=React.useState(likes.length),_React$useState4=_slicedToArray(_React$useState3,2),isCount=_React$useState4[0],setCount=_React$useState4[1];React.useEffect(function(){setLike(likes.some(function(element){return myId===element._id;}));},[likes,myId]);function handleLike(){if(isLike){api.deleteCardLike(cardId).then(function(res){setLike(false);setCount(res.likes.length);}).catch(function(err){return console.log(err);});}else{api.getCardLike(cardId).then(function(res){setLike(true);setCount(res.likes.length);}).catch(function(err){return console.log(err);});}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"element__like \".concat(isLike?\"element__like_active\":\"\"),type:\"button\",onClick:handleLike}),/*#__PURE__*/_jsx(\"p\",{className:\"element__like-counter\",children:isCount})]});}export default ButtonLike;","map":{"version":3,"names":["React","api","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ButtonLike","_ref","likes","myId","cardId","_React$useState","useState","_React$useState2","_slicedToArray","isLike","setLike","_React$useState3","length","_React$useState4","isCount","setCount","useEffect","some","element","_id","handleLike","deleteCardLike","then","res","catch","err","console","log","getCardLike","children","className","concat","type","onClick"],"sources":["/Users/anti1hero/Desktop/dev/mesto-react/src/components/ButtonLike.jsx"],"sourcesContent":["import React from \"react\";\nimport api from \"../utils/api\";\n\nfunction ButtonLike({ likes, myId, cardId }) {\n  const [isLike, setLike] = React.useState(false);\n  const [isCount, setCount] = React.useState(likes.length);\n\n  React.useEffect(() => {\n    setLike(likes.some((element) => myId === element._id));\n  }, [likes, myId]);\n\n  function handleLike() {\n    if (isLike) {\n      api\n        .deleteCardLike(cardId)\n        .then((res) => {\n          setLike(false);\n          setCount(res.likes.length);\n        })\n        .catch((err) => console.log(err));\n    } else {\n      api\n        .getCardLike(cardId)\n        .then((res) => {\n          setLike(true);\n          setCount(res.likes.length);\n        })\n        .catch((err) => console.log(err));\n    }\n  }\n\n  return (\n    <>\n      <button\n        className={`element__like ${isLike ? `element__like_active` : \"\"}`}\n        type=\"button\"\n        onClick={handleLike}\n      />\n      <p className=\"element__like-counter\">{isCount}</p>\n    </>\n  );\n}\n\nexport default ButtonLike;\n"],"mappings":"8HAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,GAAG,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,QAAA,IAAAC,SAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE/B,QAAS,CAAAC,UAAUA,CAAAC,IAAA,CAA0B,IAAvB,CAAAC,KAAK,CAAAD,IAAA,CAALC,KAAK,CAAEC,IAAI,CAAAF,IAAA,CAAJE,IAAI,CAAEC,MAAM,CAAAH,IAAA,CAANG,MAAM,CACvC,IAAAC,eAAA,CAA0Bb,KAAK,CAACc,QAAQ,CAAC,KAAK,CAAC,CAAAC,gBAAA,CAAAC,cAAA,CAAAH,eAAA,IAAxCI,MAAM,CAAAF,gBAAA,IAAEG,OAAO,CAAAH,gBAAA,IACtB,IAAAI,gBAAA,CAA4BnB,KAAK,CAACc,QAAQ,CAACJ,KAAK,CAACU,MAAM,CAAC,CAAAC,gBAAA,CAAAL,cAAA,CAAAG,gBAAA,IAAjDG,OAAO,CAAAD,gBAAA,IAAEE,QAAQ,CAAAF,gBAAA,IAExBrB,KAAK,CAACwB,SAAS,CAAC,UAAM,CACpBN,OAAO,CAACR,KAAK,CAACe,IAAI,CAAC,SAACC,OAAO,QAAK,CAAAf,IAAI,GAAKe,OAAO,CAACC,GAAG,GAAC,CAAC,CACxD,CAAC,CAAE,CAACjB,KAAK,CAAEC,IAAI,CAAC,CAAC,CAEjB,QAAS,CAAAiB,UAAUA,CAAA,CAAG,CACpB,GAAIX,MAAM,CAAE,CACVhB,GAAG,CACA4B,cAAc,CAACjB,MAAM,CAAC,CACtBkB,IAAI,CAAC,SAACC,GAAG,CAAK,CACbb,OAAO,CAAC,KAAK,CAAC,CACdK,QAAQ,CAACQ,GAAG,CAACrB,KAAK,CAACU,MAAM,CAAC,CAC5B,CAAC,CAAC,CACDY,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACrC,CAAC,IAAM,CACLhC,GAAG,CACAmC,WAAW,CAACxB,MAAM,CAAC,CACnBkB,IAAI,CAAC,SAACC,GAAG,CAAK,CACbb,OAAO,CAAC,IAAI,CAAC,CACbK,QAAQ,CAACQ,GAAG,CAACrB,KAAK,CAACU,MAAM,CAAC,CAC5B,CAAC,CAAC,CACDY,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,GAAC,CACrC,CACF,CAEA,mBACE1B,KAAA,CAAAF,SAAA,EAAAgC,QAAA,eACElC,IAAA,WACEmC,SAAS,kBAAAC,MAAA,CAAmBtB,MAAM,wBAA4B,EAAE,CAAG,CACnEuB,IAAI,CAAC,QAAQ,CACbC,OAAO,CAAEb,UAAW,CACrB,CAAC,cACFzB,IAAA,MAAGmC,SAAS,CAAC,uBAAuB,CAAAD,QAAA,CAAEf,OAAO,CAAI,CAAC,EAClD,CAAC,CAEP,CAEA,cAAe,CAAAd,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}